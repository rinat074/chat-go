# GoChat - Микросервисное приложение для чата

Это микросервисное приложение для чата, разработанное на Go. Проект демонстрирует использование микросервисной архитектуры, gRPC для межсервисного взаимодействия и RESTful API для внешних клиентов.

## Структура проекта

```
.
├── docker-compose.yml    # Конфигурация Docker Compose для запуска всех сервисов
├── Makefile              # Команды для сборки и запуска проекта
├── proto/                # Определения Protocol Buffers
│   ├── auth/             # Протоколы для сервиса аутентификации
│   └── chat/             # Протоколы для чат-сервиса
└── services/             # Микросервисы
    ├── auth-service/     # Сервис аутентификации
    ├── chat-service/     # Чат-сервис
    └── gateway-service/  # API-шлюз
```

## Микросервисы

### Auth Service
Отвечает за аутентификацию и авторизацию пользователей, управление JWT-токенами.

### Chat Service
Управляет чатами, сообщениями и уведомлениями.

### Gateway Service
API-шлюз, который маршрутизирует запросы к соответствующим микросервисам и предоставляет единую точку входа для клиентов.

## Технологии

- **Go**: Основной язык программирования
- **gRPC**: Для межсервисного взаимодействия
- **Protocol Buffers**: Для определения API и обмена данными
- **PostgreSQL**: Основная база данных
- **Redis**: Для кэширования и управления сессиями
- **Docker & Docker Compose**: Для контейнеризации и оркестрации
- **JWT**: Для аутентификации

## Запуск проекта

### Предварительные требования

- Go 1.21+
- Docker и Docker Compose
- Make

### Сборка и запуск

1. Клонировать репозиторий:
   ```
   git clone https://github.com/rinat074/chat-go.git
   cd chat-go
   ```

2. Запустить все сервисы с помощью Docker Compose:
   ```
   docker-compose up -d
   ```

3. Или использовать Makefile:
   ```
   make run
   ```

## Разработка

### Генерация Protocol Buffers

```
make proto
```

### Сборка отдельных сервисов

```
make build-auth
make build-chat
make build-gateway
```

## API Endpoints

### Auth Service
- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Вход в систему
- `POST /api/auth/refresh` - Обновление токена
- `POST /api/auth/logout` - Выход из системы

### Chat Service
- `GET /api/chats` - Получение списка чатов
- `POST /api/chats` - Создание нового чата
- `GET /api/chats/{id}` - Получение информации о чате
- `GET /api/chats/{id}/messages` - Получение сообщений чата
- `POST /api/chats/{id}/messages` - Отправка сообщения в чат
- `WS /api/ws` - WebSocket соединение для реального времени

## Лицензия

MIT 